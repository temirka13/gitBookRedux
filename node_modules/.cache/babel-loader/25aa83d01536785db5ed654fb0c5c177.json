{"ast":null,"code":"import _toConsumableArray from \"/home/temir/projects/react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/temir/projects/react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/temir/projects/react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/temir/projects/react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/temir/projects/react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/temir/projects/react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/temir/projects/react-app/src/App.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Add } from './components/Add';\nimport { News } from './components/News';\nimport './App.css';\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      news: null,\n      isLoading: false\n    };\n\n    _this.handleAddNews = function (data) {\n      var nextNews = [data].concat(_toConsumableArray(_this.state.news));\n\n      _this.setState({\n        news: nextNews\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.setState({\n        isLoading: true\n      });\n      /* nativeJs\n      fetch('http://localhost:3000/data/newsData.json')\n      .then(response => {\n        return response.json()\n      })\n      .then(data => {\n        setTimeout(() => { // добавили задержку\n          this.setState({ isLoading: false, news: data })\n        }, 3000) // в три секунды\n      })\n      */\n\n      var domain = 'http://localhost:3000/data/newsData.json';\n      axios.get(domain).then(function (res) {\n        console.log(res.data);\n        setTimeout(function () {\n          _this2.setState({\n            isLoading: false,\n            news: res.data\n          });\n        }, 3000);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          news = _this$state.news,\n          isLoading = _this$state.isLoading;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(Add, {\n        onAddNews: this.handleAddNews,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, \"\\u041D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0438\"), isLoading && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C\\u0441\\u044F \\u0447\\u0435\\u0440\\u0435\\u0437 3 \\u0441\\u0435\\u043A\\u0443\\u043D\\u0434\\u044B \"), Array.isArray(news) && React.createElement(News, {\n        data: news,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var nextFilteredNews; // смотрим в state.news (ранее смотрели в props)\n      // и проверяем, чтобы не клоинировать null\n      // например, в момент первой отрисовки\n\n      if (Array.isArray(state.news)) {\n        nextFilteredNews = _toConsumableArray(state.news);\n        nextFilteredNews.forEach(function (item, index) {\n          if (item.bigText.toLowerCase().indexOf('pubg') !== -1) {\n            item.bigText = 'СПАМ';\n          }\n        });\n        return {\n          filteredNews: nextFilteredNews\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["/home/temir/projects/react-app/src/App.js"],"names":["React","axios","Add","News","App","state","news","isLoading","handleAddNews","data","nextNews","setState","domain","get","then","res","console","log","setTimeout","catch","err","Array","isArray","props","nextFilteredNews","forEach","item","index","bigText","toLowerCase","indexOf","filteredNews","Component"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,GAAT,QAAoB,kBAApB;AACA,SAASC,IAAT,QAAqB,mBAArB;AACA,OAAO,WAAP;;IAEMC,G;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,IAAI,EAAE,IADA;AAENC,MAAAA,SAAS,EAAE;AAFL,K;;UAgDRC,a,GAAgB,UAAAC,IAAI,EAAI;AACtB,UAAMC,QAAQ,IAAID,IAAJ,4BAAa,MAAKJ,KAAL,CAAWC,IAAxB,EAAd;;AACA,YAAKK,QAAL,CAAc;AAAEL,QAAAA,IAAI,EAAEI;AAAR,OAAd;AACD,K;;;;;;;wCAzBmB;AAAA;;AAClB,WAAKC,QAAL,CAAc;AAAEJ,QAAAA,SAAS,EAAE;AAAb,OAAd;AACA;;;;;;;;;;;;AAYE,UAAMK,MAAM,GAAG,0CAAf;AACAX,MAAAA,KAAK,CAACY,GAAN,CAAUD,MAAV,EAAkBE,IAAlB,CAAuB,UAACC,GAAD,EAAS;AAChCC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACN,IAAhB;AACAS,QAAAA,UAAU,CAAC,YAAM;AACf,UAAA,MAAI,CAACP,QAAL,CAAc;AAAEJ,YAAAA,SAAS,EAAE,KAAb;AAAoBD,YAAAA,IAAI,EAAES,GAAG,CAACN;AAA9B,WAAd;AACD,SAFS,EAEP,IAFO,CAAV;AAGD,OALC,EAKCU,KALD,CAKQ,UAAAC,GAAG;AAAA,eAAIJ,OAAO,CAACC,GAAR,CAAYG,GAAZ,CAAJ;AAAA,OALX;AAMH;;;6BAKQ;AAAA,wBACqB,KAAKf,KAD1B;AAAA,UACCC,IADD,eACCA,IADD;AAAA,UACOC,SADP,eACOA,SADP;AAGP,aACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,SAAS,EAAE,KAAKC,aAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sDAFF,EAGGD,SAAS,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2JAHhB,EAIGc,KAAK,CAACC,OAAN,CAAchB,IAAd,KAAuB,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAEA,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJ1B,CADF;AAQD;;;6CA1D+BiB,K,EAAOlB,K,EAAO;AAC5C,UAAImB,gBAAJ,CAD4C,CAG5C;AACA;AACA;;AACA,UAAIH,KAAK,CAACC,OAAN,CAAcjB,KAAK,CAACC,IAApB,CAAJ,EAA+B;AAC7BkB,QAAAA,gBAAgB,sBAAOnB,KAAK,CAACC,IAAb,CAAhB;AAEAkB,QAAAA,gBAAgB,CAACC,OAAjB,CAAyB,UAACC,IAAD,EAAOC,KAAP,EAAiB;AACxC,cAAID,IAAI,CAACE,OAAL,CAAaC,WAAb,GAA2BC,OAA3B,CAAmC,MAAnC,MAA+C,CAAC,CAApD,EAAuD;AACrDJ,YAAAA,IAAI,CAACE,OAAL,GAAe,MAAf;AACD;AACF,SAJD;AAKA,eAAO;AACLG,UAAAA,YAAY,EAAEP;AADT,SAAP;AAGD;;AACD,aAAO,IAAP;AACD;;;;EAzBexB,KAAK,CAACgC,S;;AAmExB,eAAe5B,GAAf","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport { Add } from './components/Add'\nimport { News } from './components/News'\nimport './App.css'\n\nclass App extends React.Component {\n  state = {\n    news: null,\n    isLoading: false,\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    let nextFilteredNews\n\n    // смотрим в state.news (ранее смотрели в props)\n    // и проверяем, чтобы не клоинировать null\n    // например, в момент первой отрисовки\n    if (Array.isArray(state.news)) {\n      nextFilteredNews = [...state.news]\n\n      nextFilteredNews.forEach((item, index) => {\n        if (item.bigText.toLowerCase().indexOf('pubg') !== -1) {\n          item.bigText = 'СПАМ'\n        }\n      })\n      return {\n        filteredNews: nextFilteredNews,\n      }\n    }\n    return null\n  }\n\n  componentDidMount() {\n    this.setState({ isLoading: true })\n    /* nativeJs\n    fetch('http://localhost:3000/data/newsData.json')\n    .then(response => {\n      return response.json()\n    })\n    .then(data => {\n      setTimeout(() => { // добавили задержку\n        this.setState({ isLoading: false, news: data })\n      }, 3000) // в три секунды\n    })\n    */\n\n      const domain = 'http://localhost:3000/data/newsData.json';\n      axios.get(domain).then((res) => {\n      console.log(res.data);\n      setTimeout(() => {\n        this.setState({ isLoading: false, news: res.data })\n      }, 3000)\n    }).catch( err => console.log(err))\n  }\n  handleAddNews = data => {\n    const nextNews = [data, ...this.state.news]\n    this.setState({ news: nextNews })\n  }\n  render() {\n    const { news, isLoading } = this.state\n\n    return (\n      <React.Fragment>\n        <Add onAddNews={this.handleAddNews} />\n        <h3>Новости</h3>\n        {isLoading && <p>Загрузиться через 3 секунды </p>}\n        {Array.isArray(news) && <News data={news} />}\n      </React.Fragment>\n    )\n  }\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}